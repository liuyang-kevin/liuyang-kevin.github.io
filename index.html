<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Kevin Liu 的简单博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="android go cgo ffmpeg Flutter">
<meta property="og:type" content="website">
<meta property="og:title" content="Kevin Liu 的简单博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Kevin Liu 的简单博客">
<meta property="og:description" content="android go cgo ffmpeg Flutter">
<meta property="og:locale" content="zh">
<meta property="article:author" content="Kevin 刘洋">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Kevin Liu 的简单博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Kevin Liu 的简单博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">全干工程师</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Github搭建博客" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/14/Github%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" class="article-date">
  <time datetime="2020-07-14T04:37:13.090Z" itemprop="datePublished">2020-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/14/Github%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/">使用Github搭建博客</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>借用Github搭建长期可用的博客或个人站。</p>
<h1 id="使用Github搭建博客"><a href="#使用Github搭建博客" class="headerlink" title="使用Github搭建博客"></a>使用Github搭建博客</h1><ol>
<li>新建git项目, 如果仓库名称为 <code>username.github.io</code>, 仓库便对应为二级域名。</li>
<li>项目配置<code>Setting</code> 中找到 <code>GitHub Pages</code> Theme Chooser 选择主题</li>
<li>配置好ssh key给github，使终端可以ssh方式调用git更新</li>
<li>这里我使用hexo作为静态博客编写项目<ul>
<li>GitHub Pages 推荐使用一种ruby的官方项目。同类项目还有很多</li>
</ul>
</li>
<li>安装Node</li>
<li>安装hexo</li>
</ol>
        
          <p class="article-more-link">
            <a href="/2020/07/14/Github%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/14/Github%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" data-id="ckcli33sy001j186nc3c6ccde" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Dart-编译、启动服务、和测试-web-应用的-build-runner" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/11/Dart-%E7%BC%96%E8%AF%91%E3%80%81%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E3%80%81%E5%92%8C%E6%B5%8B%E8%AF%95-web-%E5%BA%94%E7%94%A8%E7%9A%84-build-runner/" class="article-date">
  <time datetime="2020-07-11T04:36:48.000Z" itemprop="datePublished">2020-07-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/11/Dart-%E7%BC%96%E8%AF%91%E3%80%81%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E3%80%81%E5%92%8C%E6%B5%8B%E8%AF%95-web-%E5%BA%94%E7%94%A8%E7%9A%84-build-runner/">Dart 编译、启动服务、和测试 web 应用的 build_runner</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="配置-build-runner"><a href="#配置-build-runner" class="headerlink" title="配置 build_runner"></a>配置 build_runner</h1><p>要使用build_runner，往你的应用的 pubspec 中添加这些开发依赖：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dev_dependencies:</span></span><br><span class="line">  <span class="comment"># 最高版本自己去搜</span></span><br><span class="line">  <span class="attr">build_runner:</span> <span class="string">^1.0.0</span></span><br><span class="line">  <span class="attr">build_web_compilers:</span> <span class="string">^0.4.0</span> <span class="comment">#测试用 </span></span><br><span class="line">  <span class="attr">build_web_compilers:</span> <span class="string">^0.3.6</span> <span class="comment"># web用</span></span><br></pre></td></tr></table></figure>
<ul>
<li>要运行一个开发服务器，使用serve命令：<code>pub run build_runner serve</code></li>
<li>使用build命令来编译 <code>pub run build_runner build [--release] [--output &lt;dirname&gt;] ..</code></li>
</ul>
<h2 id="编译配置文件"><a href="#编译配置文件" class="headerlink" title="编译配置文件"></a>编译配置文件</h2><p>可以创建像<code>build.name.yaml</code>这样的命名的配置文件。</p>
<p>例如，如果你有一个名为<code>build.debug.yaml</code>的编译配置文件，使用它代替<code>build.yaml</code>，像这样：</p>
<p><code>pub run build_runner build --config debug</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/11/Dart-%E7%BC%96%E8%AF%91%E3%80%81%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E3%80%81%E5%92%8C%E6%B5%8B%E8%AF%95-web-%E5%BA%94%E7%94%A8%E7%9A%84-build-runner/" data-id="ckcli33sh0009186nhk7tbimn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dart/" rel="tag">dart</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-LaTex-速成手册" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/07/LaTex-%E9%80%9F%E6%88%90%E6%89%8B%E5%86%8C/" class="article-date">
  <time datetime="2020-07-07T02:03:53.000Z" itemprop="datePublished">2020-07-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/07/LaTex-%E9%80%9F%E6%88%90%E6%89%8B%E5%86%8C/">LaTex 速成手册。</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>因为打算看一下数学题，复习一下数学公式，又不想动纸笔。随即想到了LaTex。数学，英语，新知识，一举多得的操作。言归正传。我们开始。</p>
<p>首先了解一下历史，大佬高德纳写书的时候觉得排版印刷工具给自己的书拖后腿。就自己开发了这个东西。总之就是超牛逼。这个东西算是个排版工具，但是又是跟语言配合一起使用，可以粗略的理解为高配的MarkDown。纯文本、后缀<code>.tex</code>。然后，文件写完了，需要编译工具tex。我是Mac，图形界面的话，可以用：</p>
<blockquote>
<p>TeX Live 是 TUG (TeX User Group) 维护和发布的 TeX 系统，可说是「官方」的 TeX 系统。其相比其他的系统优势在于能够保证更新，兼容性强，也能保持在跨操作系统平台、跨用户的一致性。参见TeX Live 的官方站点。</p>
<p>TeX Live 在 macOS/OS X 上的名字是 MacTeX，它的官方站点。可以在这里下载 MacTeX 的安装器，而后安装 MacTeX。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cask install mactex</span><br></pre></td></tr></table></figure>

<blockquote>
<p>其实一开始我是使用vscode插件，想简单使用的。发现搞不定，就投奔了正规军</p>
</blockquote>
<h3 id="vscode-插件-LaTeX-Workshop"><a href="#vscode-插件-LaTeX-Workshop" class="headerlink" title="vscode 插件 LaTeX Workshop"></a>vscode 插件 <code>LaTeX Workshop</code></h3><p>推荐，代码提示高亮都友好</p>
<p>主要是要搜索一下全局配置的，latex-workshop.latex.tools，假如一个参数：</p>
<p>是把 “-xelatex” 加到 latexmk 的参数里：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&quot;latex-workshop.latex.tools&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;name&quot;: &quot;latexmk&quot;,</span><br><span class="line">      &quot;command&quot;: &quot;latexmk&quot;,</span><br><span class="line">      &quot;args&quot;: [</span><br><span class="line">        &quot;-synctex&#x3D;1&quot;,</span><br><span class="line">        &quot;-interaction&#x3D;nonstopmode&quot;,</span><br><span class="line">        &quot;-file-line-error&quot;,</span><br><span class="line">        &quot;-xelatex&quot;,</span><br><span class="line">        &quot;-pdf&quot;,</span><br><span class="line">        &quot;%DOC%&quot;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="XeLaTeX"><a href="#XeLaTeX" class="headerlink" title="XeLaTeX"></a>XeLaTeX</h3><p>迷惑初级玩家的坑。各种版本，如：TeX, LaTeX, XeLaTeX等等<br>    1. TeX - LaTeX<br>    2. pdfTeX - pdfLaTeX<br>    3. XeTeX - XeLaTeX<br>    4. CTeX - MiKTeX - TeX Live</p>
<p>版本问题主要是年代久远，功能能差一点，不支持中文，面向打印dvi格式等等。本文中需要用到的排版工具主要是XeLaTeX。其他需要再查。</p>
<h3 id="更多细节且简单文档"><a href="#更多细节且简单文档" class="headerlink" title="更多细节且简单文档"></a>更多细节且简单文档</h3><p><a href="https://www.latexstudio.net/archives/2323.html" target="_blank" rel="noopener">更多原文</a></p>
<h3 id="Hello-world"><a href="#Hello-world" class="headerlink" title="Hello, world!"></a>Hello, world!</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">\documentclass&#123;article&#125;</span><br><span class="line">% 这里是导言区</span><br><span class="line">\begin&#123;document&#125;</span><br><span class="line">Hello, world!</span><br><span class="line">\end&#123;document&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>% 注释</li>
<li>\ 命令，命令分割文档段落<h3 id="支持中文-ctex-文档类"><a href="#支持中文-ctex-文档类" class="headerlink" title="支持中文 - ctex 文档类"></a>支持中文 - ctex 文档类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">\documentclass[UTF8]&#123;ctexart&#125;</span><br><span class="line">\begin&#123;document&#125;</span><br><span class="line">你好，world!</span><br><span class="line">\end&#123;document&#125;</span><br></pre></td></tr></table></figure></li>
<li>ctex 可以理解为程序扩展，加了宏，处理了中文等问题。还有其他手段也可以实现。</li>
<li>TeX 系统对宏包名称和控制序列的大小写是敏感的，倒入其他程序的时候需要注意</li>
</ul>
<h3 id="作者、标题、日期"><a href="#作者、标题、日期" class="headerlink" title="作者、标题、日期"></a>作者、标题、日期</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">\documentclass[UTF8]&#123;ctexart&#125;</span><br><span class="line">\title&#123;你好，world!&#125;</span><br><span class="line">\author&#123;Liam&#125;</span><br><span class="line">\date&#123;\today&#125;</span><br><span class="line">\begin&#123;document&#125;</span><br><span class="line">\maketitle</span><br><span class="line">你好，world!</span><br><span class="line">\end&#123;document&#125;</span><br></pre></td></tr></table></figure>

<h3 id="章节和段落-插入目录"><a href="#章节和段落-插入目录" class="headerlink" title="章节和段落 + 插入目录"></a>章节和段落 + 插入目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">\documentclass[UTF8]&#123;ctexart&#125;</span><br><span class="line">\title&#123;你好，world!&#125;</span><br><span class="line">\author&#123;Liam&#125;</span><br><span class="line">\date&#123;\today&#125;</span><br><span class="line">\begin&#123;document&#125;</span><br><span class="line">\maketitle</span><br><span class="line">\tableofcontents</span><br><span class="line">\section&#123;你好中国&#125;</span><br><span class="line">中国在 East Asia.</span><br><span class="line">\subsection&#123;Hello Beijing&#125;</span><br><span class="line">北京是 capital of China.</span><br><span class="line">\subsubsection&#123;Hello Dongcheng District&#125;</span><br><span class="line">\paragraph&#123;Tian&#39;anmen Square&#125;</span><br><span class="line">is in the center of Beijing</span><br><span class="line">\subparagraph&#123;Chairman Mao&#125;</span><br><span class="line">is in the center of 天安门广场。</span><br><span class="line">\subsection&#123;Hello 山东&#125;</span><br><span class="line">\paragraph&#123;山东大学&#125; is one of the best university in 山东。</span><br><span class="line">\end&#123;document&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>\maketitle，在它的下面插入控制序列\tableofcontents，保存并用 XeLaTeX 编译两次，才出现目录。</li>
</ul>
<h2 id="终于，数学公式"><a href="#终于，数学公式" class="headerlink" title="终于，数学公式"></a>终于，数学公式</h2><p>需要在导言区加载amsmath宏包：</p>
<p>\usepackage{amsmath}</p>
<h3 id="数学模式"><a href="#数学模式" class="headerlink" title="数学模式"></a>数学模式</h3><p>LaTeX 的数学模式有两种：</p>
<ul>
<li>行内模式 (inline) 正文的行文中，插入数学公式<ul>
<li>在行文中，使用$ … $可以插入行内公式，</li>
</ul>
</li>
<li>行间模式 (display)。独立排列单独成行。<ul>
<li>使用[ … ]可以插入行间公式，</li>
<li>如果需要对行间公式进行编号，可以使用equation环境： \begin{equaion} … \end{equation}</li>
</ul>
</li>
</ul>
<ol start="0">
<li><p>上下标</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">上标幂次：$ z &#x3D; r\cdot e^&#123;2\pi i&#125; $</span><br><span class="line"></span><br><span class="line">下标标记：$a_2 &#x3D; b_1$</span><br></pre></td></tr></table></figure>
</li>
<li><p>根号 $\sqrt{\pi}$</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\sqrt&#123;\pi&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>分式用$\frac{a}{b}$</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\frac&#123;a&#125;&#123;b&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>运算符: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\[ \pm\; \times \; \div\; \cdot\; \cap\; \cup\; \geq\; \leq\; \neq\; \approx \; \equiv \]</span><br></pre></td></tr></table></figure>
</li>
<li><p>空白站位符 <code>\;</code> : </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aaaa\;bbbb</span><br></pre></td></tr></table></figure>


</li>
</ol>
<ol start="5">
<li>$ \sum_{i=1}^n i\quad \prod_{i=1}^n $<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ \sum\limits _&#123;i&#x3D;1&#125;^n i\quad \prod\limits _&#123;i&#x3D;1&#125;^n $</span><br><span class="line"></span><br><span class="line">\[ \lim_&#123;x\to0&#125;x^2 \quad \int_a^b x^2 dx \]</span><br><span class="line"></span><br><span class="line">\[ \lim\nolimits _&#123;x\to0&#125;x^2\quad \int\nolimits_a^b x^2 dx \]</span><br><span class="line"></span><br><span class="line">\[ \iint\quad \iiint\quad \iiiint\quad \idotsint \]</span><br></pre></td></tr></table></figure>


</li>
</ol>
<ol start="6">
<li>分隔符 $\big((y)\big)$<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">\[ \Bigg(\bigg(\Big(\big((x)\big)\Big)\bigg)\Bigg) \]</span><br><span class="line">\[ \Bigg[\bigg[\Big[\big[[x]\big]\Big]\bigg]\Bigg] \]</span><br><span class="line">\[ \Bigg \&#123;\bigg \&#123;\Big \&#123;\big \&#123;\&#123;x\&#125;\big \&#125;\Big \&#125;\bigg \&#125;\Bigg\&#125; \]</span><br><span class="line">\[ \Bigg\langle\bigg\langle\Big\langle\big\langle\langle x</span><br><span class="line">\rangle\big\rangle\Big\rangle\bigg\rangle\Bigg\rangle \]</span><br><span class="line">\[ \Bigg\lvert\bigg\lvert\Big\lvert\big\lvert\lvert x</span><br><span class="line">\rvert\big\rvert\Big\rvert\bigg\rvert\Bigg\rvert \]</span><br><span class="line">\[ \Bigg\lVert\bigg\lVert\Big\lVert\big\lVert\lVert x</span><br><span class="line">\rVert\big\rVert\Big\rVert\bigg\rVert\Bigg\rVert \]</span><br></pre></td></tr></table></figure>


</li>
</ol>
<ol start="7">
<li>省略号 $a\dots$ <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">\[ x_1,x_2,\dots ,x_n\quad \]</span><br><span class="line">\[1,2,\cdots ,n\quad \]</span><br><span class="line">\[\vdots\quad \ddots \]</span><br></pre></td></tr></table></figure>


</li>
</ol>
<ol start="8">
<li><p>矩阵 $\begin{bmatrix} 1&amp;2\3&amp;4 \end{bmatrix}$</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">\[ \begin&#123;pmatrix&#125; a&amp;b\\c&amp;d \end&#123;pmatrix&#125; \quad</span><br><span class="line">\begin&#123;bmatrix&#125; a&amp;b\\c&amp;d \end&#123;bmatrix&#125; \quad</span><br><span class="line">\begin&#123;Bmatrix&#125; a&amp;b\\c&amp;d \end&#123;Bmatrix&#125; \quad</span><br><span class="line">\begin&#123;vmatrix&#125; a&amp;b\\c&amp;d \end&#123;vmatrix&#125; \quad</span><br><span class="line">\begin&#123;Vmatrix&#125; a&amp;b\\c&amp;d \end&#123;Vmatrix&#125; \]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Marry has a little matrix $ ( \begin&#123;smallmatrix&#125; a&amp;b\\c&amp;d \end&#123;smallmatrix&#125; ) $.</span><br></pre></td></tr></table></figure>
</li>
<li><p>长公式</p>
</li>
<li><p>1 不对齐</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;multline&#125;</span><br><span class="line">x &#x3D; a+b+c+&#123;&#125; \\</span><br><span class="line">d+e+f+g</span><br><span class="line">\end&#123;multline&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>2 对齐</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">\[</span><br><span class="line">\begin&#123;aligned&#125;</span><br><span class="line">x &#x3D;&#123;&#125;&amp; a+b+c+&#123;&#125; \\</span><br><span class="line">&amp;d+e+f+g</span><br><span class="line">\end&#123;aligned&#125;</span><br><span class="line">\]</span><br></pre></td></tr></table></figure>
</li>
<li><p>公式组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;gather&#125;</span><br><span class="line">a &#x3D; b+c+d \\</span><br><span class="line">x &#x3D; y+z</span><br><span class="line">\end&#123;gather&#125;</span><br><span class="line">\begin&#123;align&#125;</span><br><span class="line">a &amp;&#x3D; b+c+d \\</span><br><span class="line">x &amp;&#x3D; y+z</span><br><span class="line">\end&#123;align&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>10.1 分段函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">\[ y&#x3D;\begin&#123;cases&#125;</span><br><span class="line">-x,\quad x\leq 0 \\</span><br><span class="line">x,\quad x&gt;0</span><br><span class="line">\end&#123;cases&#125; \]</span><br></pre></td></tr></table></figure>


<p>插入图片和表格 需要 倒入函数库 <code>\\usepackage\{graphicx\}</code></p>
<p>文档中使用<code>\\includegraphics\{a.jpg\}</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\includegraphics[width &#x3D; .4\textwidth]&#123;a.jpg&#125;</span><br><span class="line">\includegraphics[width &#x3D; .2\textwidth]&#123;a.jpg&#125;</span><br></pre></td></tr></table></figure>

<p>表格</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;tabular&#125;&#123;|l|c|r|&#125;</span><br><span class="line"> \hline</span><br><span class="line">操作系统&amp; 发行版&amp; 编辑器\\</span><br><span class="line"> \hline</span><br><span class="line">Windows &amp; MikTeX &amp; TexMakerX \\</span><br><span class="line"> \hline</span><br><span class="line">Unix&#x2F;Linux &amp; teTeX &amp; Kile \\</span><br><span class="line"> \hline</span><br><span class="line">Mac OS &amp; MacTeX &amp; TeXShop \\</span><br><span class="line"> \hline</span><br><span class="line">通用&amp; TeX Live &amp; TeXworks \\</span><br><span class="line"> \hline</span><br><span class="line">\end&#123;tabular&#125;</span><br></pre></td></tr></table></figure>

<p>浮动体</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;figure&#125;[htbp]</span><br><span class="line">\centering</span><br><span class="line">\includegraphics[width &#x3D; .2\textwidth]&#123;a.jpg&#125;</span><br><span class="line">\caption&#123;有图有真相&#125;</span><br><span class="line">\label&#123;fig:myphoto&#125;</span><br><span class="line">\end&#123;figure&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/07/LaTex-%E9%80%9F%E6%88%90%E6%89%8B%E5%86%8C/" data-id="ckcli33t2001r186n6m89evhs" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Dart-注解，APT" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/01/Dart-%E6%B3%A8%E8%A7%A3%EF%BC%8CAPT/" class="article-date">
  <time datetime="2020-07-01T06:10:19.000Z" itemprop="datePublished">2020-07-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/01/Dart-%E6%B3%A8%E8%A7%A3%EF%BC%8CAPT/">Dart 注解，APT</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>对于注解，初级开发者大都不需要关注，多半是自动代码生成中发现了，随之就忽略了。总觉得没啥用，这事儿不归我管。这种东西，多半还是开发过程中，遇到了效率瓶颈，程序员才会想起来的东西。关键点是，你需要它的时候，你不一定能想起来它是谁。</p>
<p>OK，进入主题</p>
<h1 id="APT-Annotation-Processing-Tool-即注解处理器"><a href="#APT-Annotation-Processing-Tool-即注解处理器" class="headerlink" title="APT(Annotation Processing Tool)即注解处理器"></a>APT(Annotation Processing Tool)即注解处理器</h1><blockquote>
<p>APT：它是一种工具，处理注解, 简单来说就是在编译期，通过注解生成新的文件或者代码。</p>
</blockquote>
<p>使用APT的优点就是方便、简单，可以少些很多重复的代码。Android、Java里我们最常见的@就是这个。Python里有装饰器。不严谨的来说，C里的宏也算这个东西。就是为了提升效率，减少重复代码。</p>
<p>Flutter，其实也就是Dart的注解处理依赖于 <a href="https://github.com/dart-lang/source_gen" target="_blank" rel="noopener">source_gen</a>。它的详细资料可以在它的 Github 主页查看，这里我们不做过多展开，你只需要知道[Dart-APT Powered by <a href="https://github.com/dart-lang/source_gen" target="_blank" rel="noopener">source_gen</a>]</p>
<h1 id="A-Dart-Demo"><a href="#A-Dart-Demo" class="headerlink" title="A Dart Demo"></a>A Dart Demo</h1><ol start="0">
<li>新建demo项目。</li>
<li>依赖 source_gen</li>
</ol>
<h2 id="依赖-source-gen"><a href="#依赖-source-gen" class="headerlink" title="依赖 source_gen"></a>依赖 source_gen</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/01/Dart-%E6%B3%A8%E8%A7%A3%EF%BC%8CAPT/" data-id="ckcli33sk000d186ncxgg5ltl" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Flutter-动画考究" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/30/Flutter-%E5%8A%A8%E7%94%BB%E8%80%83%E7%A9%B6/" class="article-date">
  <time datetime="2020-06-30T07:59:12.000Z" itemprop="datePublished">2020-06-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/30/Flutter-%E5%8A%A8%E7%94%BB%E8%80%83%E7%A9%B6/">Flutter 动画考究</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>根据官方介绍，Flutter中动画包括</p>
<ul>
<li><p>Implicit Animation 隐式动画</p>
</li>
<li><p>Explicit Animation 显式动画<br>从效率上来看，动画效果的制作难度依次上升<br><img src="/images/2020/06/30/0ecb1393-66b7-47c4-83d6-5e31b18117e7.png" alt="image.png"></p>
</li>
<li><p>UI级别的，尽量使用 隐式动画，减少controller使用，代码量可以少很多</p>
<ul>
<li>隐式动画优势明显，其内部处理了位移，当两次setState冲突时，隐式动画内部就可以处理位移。</li>
</ul>
</li>
<li><p>复杂一点的，用controller，各种效果配合实现</p>
</li>
<li><p>高频动画，需要使用controller配合painter实现了</p>
<ul>
<li>为了效率保证，使用painter自定义绘制，也需要controller的回调时钟来实现。</li>
</ul>
</li>
</ul>
<h1 id="Implicit-Animation-隐式动画"><a href="#Implicit-Animation-隐式动画" class="headerlink" title="Implicit Animation 隐式动画"></a>Implicit Animation 隐式动画</h1><p>Flutter当然自带一批Implicit Animation控件。以Anminated名称起头的控件差不多有一半以上都是Implicit Animation，然而诡异的是，介绍动画的教程里就是不提，嗨呀，又逼着用户一个一个翻documentation。</p>
<h2 id="1-最有代表性的AnimatedContainer，用法和Container一模一样。"><a href="#1-最有代表性的AnimatedContainer，用法和Container一模一样。" class="headerlink" title="1. 最有代表性的AnimatedContainer，用法和Container一模一样。"></a>1. 最有代表性的AnimatedContainer，用法和Container一模一样。</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> width = <span class="number">200</span>;</span><br><span class="line"><span class="keyword">var</span> height = <span class="number">200</span>;</span><br><span class="line"><span class="keyword">var</span> color = Colors.blue;</span><br><span class="line"></span><br><span class="line"><span class="comment">//.....</span></span><br><span class="line"></span><br><span class="line">AnimatedContainer(</span><br><span class="line">  width: width,</span><br><span class="line">  height: height,</span><br><span class="line">  color: color,</span><br><span class="line">  duration: <span class="built_in">Duration</span>(seconds: <span class="number">1</span>),</span><br><span class="line">),</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当使用setState改变参数的时候，AnimatedContainer自动生成过渡动画并且播放</span></span><br><span class="line">setState(() &#123;</span><br><span class="line">  height=<span class="number">500</span>;</span><br><span class="line">  width=<span class="number">500</span>;</span><br><span class="line">  color=Colors.orange;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="2-隐式动画和StreamBuilder的结合"><a href="#2-隐式动画和StreamBuilder的结合" class="headerlink" title="2. 隐式动画和StreamBuilder的结合"></a>2. 隐式动画和StreamBuilder的结合</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">StreamBuilder(</span><br><span class="line">  stream: observable.stream,</span><br><span class="line">  builder: (context, snapshot) =&gt;</span><br><span class="line">    AnimatedContainer(</span><br><span class="line">      height: snapshot.data,</span><br><span class="line">      <span class="comment">//...</span></span><br><span class="line">    ),</span><br><span class="line">),</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">observable.add(<span class="number">500.0</span>);</span><br></pre></td></tr></table></figure>


<h1 id="Explicit-Animation-显式动画"><a href="#Explicit-Animation-显式动画" class="headerlink" title="Explicit Animation 显式动画"></a>Explicit Animation 显式动画</h1><p><img src="/images/2020/06/30/e68bec4f-f895-44fc-8868-6d8a8e348001.png" alt="image.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/30/Flutter-%E5%8A%A8%E7%94%BB%E8%80%83%E7%A9%B6/" data-id="ckcli33ss000z186ng3ck2yov" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-shell-ps-表头含义" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/29/shell-ps-%E8%A1%A8%E5%A4%B4%E5%90%AB%E4%B9%89/" class="article-date">
  <time datetime="2020-06-29T06:12:33.000Z" itemprop="datePublished">2020-06-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/29/shell-ps-%E8%A1%A8%E5%A4%B4%E5%90%AB%E4%B9%89/">shell ps 表头含义</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Head标头：<br>USER 用户名<br>UID 用户ID（User ID）<br>PID 进程ID（Process ID）<br>PPID 父进程的进程ID（Parent Process id）<br>SID 会话ID（Session id）<br>%CPU 进程的cpu占用率<br>%MEM 进程的内存占用率<br>VSZ 进程所使用的虚存的大小（Virtual Size）<br>RSS 进程使用的驻留集大小或者是实际内存的大小，Kbytes字节。<br>TTY 与进程关联的终端（tty）<br>STAT 进程的状态：进程状态使用字符表示的（STAT的状态码）<br>R 运行 Runnable (on run queue) 正在运行或在运行队列中等待。<br>S 睡眠 Sleeping 休眠中, 受阻, 在等待某个条件的形成或接受到信号。<br>I 空闲 Idle<br>Z 僵死 Zombie（a defunct process) 进程已终止, 但进程描述符存在, 直到父进程调用wait4()系统调用后释放。<br>D 不可中断 Uninterruptible sleep (ususally IO) 收到信号不唤醒和不可运行, 进程必须等待直到有中断发生。<br>T 终止 Terminate 进程收到SIGSTOP, SIGSTP, SIGTIN, SIGTOU信号后停止运行运行。<br>P 等待交换页<br>W 无驻留页 has no resident pages 没有足够的记忆体分页可分配。<br>X 死掉的进程<br>&lt; 高优先级进程 高优先序的进程<br>N 低优先 级进程 低优先序的进程<br>L 内存锁页 Lock 有记忆体分页分配并缩在记忆体内<br>s 进程的领导者（在它之下有子进程）；<br>l 多进程的（使用 CLONE_THREAD, 类似 NPTL pthreads）</p>
<ul>
<li>位于后台的进程组<br>START 进程启动时间和日期<br>TIME 进程使用的总cpu时间<br>COMMAND 正在执行的命令行命令<br>NI 优先级(Nice)<br>PRI 进程优先级编号(Priority)<br>WCHAN 进程正在睡眠的内核函数名称；该函数的名称是从/root/system.map文件中获得的。<br>FLAGS 与进程相关的数字标识</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/29/shell-ps-%E8%A1%A8%E5%A4%B4%E5%90%AB%E4%B9%89/" data-id="ckcli33td002h186n1j4732nd" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Android前台Activity重启问题。" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/29/Android%E5%89%8D%E5%8F%B0Activity%E9%87%8D%E5%90%AF%E9%97%AE%E9%A2%98%E3%80%82/" class="article-date">
  <time datetime="2020-06-29T06:12:02.000Z" itemprop="datePublished">2020-06-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/29/Android%E5%89%8D%E5%8F%B0Activity%E9%87%8D%E5%90%AF%E9%97%AE%E9%A2%98%E3%80%82/">Android前台Activity重启问题。</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>起因：华为等设备，App前台使用时，偶尔诡异的丢内存，空指针等问题。以前做直播接视频SDK时也会出现此问题。感觉就是内存或者线程产生了切换。本次要具体查找一波原因</p>
<h1 id="查看进程、查看内存、考虑是否内存消耗过大"><a href="#查看进程、查看内存、考虑是否内存消耗过大" class="headerlink" title="查看进程、查看内存、考虑是否内存消耗过大"></a>查看进程、查看内存、考虑是否内存消耗过大</h1><ol>
<li>find PID by your package name：<br>adb shell ps|grep com.fifthai.xxxx<br>结果如下：(加了表头与便于理解的数据)<br>USER           PID  PPID     VSZ    RSS WCHAN            ADDR S NAME<br>root             1     0   60472   4092 0                   0 S init<br>u0_a600      26605   743 7245808 521424 0                   0 S com.fifthai.xxxx<br>u0_a600      26744   743 5749684 107152 0                   0 S com.fifthai.xxxx:channel</li>
</ol>
<p>USER 用户名<br>PID 进程ID（Process ID）<br>PPID 父进程的进程ID（Parent Process id）<br>VSZ 进程所使用的虚存的大小（Virtual Size）<br>RSS 进程使用的驻留集大小或者是实际内存的大小，Kbytes字节。<br>WCHAN 进程正在睡眠的内核函数名称；该函数的名称是从/root/system.map文件中获得的。</p>
<p><a href="https://liuyang-kevin.github.io/2020/06/29/shell-ps-%E8%A1%A8%E5%A4%B4%E5%90%AB%E4%B9%89/" target="_blank" rel="noopener">查看其他 ps 表头含义</a></p>
<p>再对比一下其他应用<br>adb shell ps|grep -E “com.fifthai.dacall|com.tencent.mm”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">u999_a107    16964   743 7963720 202268 0                   0 S com.tencent.mm</span><br><span class="line">u999_a107    17114   743 6878860 154464 0                   0 S com.tencent.mm:push</span><br><span class="line">u999_a107    18762   743 12136208 239416 0                  0 S com.tencent.mm:appbrand0</span><br><span class="line">u999_a107    18781   743 11307292 197956 0                  0 S com.tencent.mm:appbrand1</span><br><span class="line">u0_a107      21040   743 7003580 207464 0                   0 S com.tencent.mm:push</span><br><span class="line">u0_a107      25616   743 7359144 297304 0                   0 S com.tencent.mm</span><br><span class="line">u0_a600      26605   743 6708952 338064 0                   0 D com.fifthai.dacall</span><br><span class="line">u0_a600      26744   743 5721652  99884 0                   0 D com.fifthai.dacall:channel</span><br></pre></td></tr></table></figure>
<p>感觉没有特别高。</p>
<ol start="2">
<li>进入高消耗部分<br>测试一波，代码应该没啥问题，内存消耗还算正常</li>
</ol>
<h1 id="对app模拟内存不足效果"><a href="#对app模拟内存不足效果" class="headerlink" title="对app模拟内存不足效果"></a>对app模拟内存不足效果</h1><h2 id="随机点-monkey"><a href="#随机点-monkey" class="headerlink" title="随机点/monkey"></a>随机点/monkey</h2><p>adb shell monkey -p com.fifthai.dacall -v 10000</p>
<h2 id="发送-trim-memory-消息"><a href="#发送-trim-memory-消息" class="headerlink" title="发送 trim memory 消息"></a>发送 trim memory 消息</h2><p>cmd:<br>adb shell am send-trim-memory <packagename> <mode><br>args:</p>
<blockquote>
<p>HIDDEN|RUNNING_MODERATE|BACKGROUND|RUNNING_LOW|MODERATE|RUNNING_CRITICAL|COMPLETE</p>
</blockquote>
<ol>
<li><p>常用</p>
<ul>
<li>TRIM_MEMORY_UI_HIDDEN 表示应用程序的 所有UI界面被隐藏了，即用户点击了Home键或者Back键导致应用的UI界面不可见．这时候应该释放一些资源．这个等级比较常用，和下面六个的关系不是很强，所以单独说．</li>
</ul>
</li>
<li><p>当我们的应用程序真正运行时的回调</p>
<ul>
<li>TRIM_MEMORY_RUNNING_MODERATE 表示应用程序正常运行，并且不会被杀掉。但是目前手机的内存已经有点低了，系统可能会开始根据LRU缓存规则来去杀死进程了。</li>
<li>TRIM_MEMORY_RUNNING_LOW 表示应用程序正常运行，并且不会被杀掉。但是目前手机的内存已经非常低了，我们应该去释放掉一些不必要的资源以提升系统的性能，同时这也会直接影响到我们应用程序的性能。</li>
<li>TRIM_MEMORY_RUNNING_CRITICAL 表示应用程序仍然正常运行，但是系统已经根据LRU缓存规则杀掉了大部分缓存的进程了。这个时候我们应当尽可能地去释放任何不必要的资源，不然的话系统可能会继续杀掉所有缓存中的进程，并且开始杀掉一些本来应当保持运行的进程，比如说后台运行的服务。</li>
</ul>
</li>
<li><p>当应用程序是缓存的，则会收到以下几种类型的回调：</p>
<ul>
<li>TRIM_MEMORY_BACKGROUND 表示手机目前内存已经很低了，系统准备开始根据LRU缓存来清理进程。这个时候我们的程序在LRU缓存列表的最近位置，是不太可能被清理掉的，但这时去释放掉一些比较容易恢复的资源能够让手机的内存变得比较充足，从而让我们的程序更长时间地保留在缓存当中，这样当用户返回我们的程序时会感觉非常顺畅，而不是经历了一次重新启动的过程。</li>
<li>TRIM_MEMORY_MODERATE 表示手机目前内存已经很低了，并且我们的程序处于LRU缓存列表的中间位置，如果手机内存还得不到进一步释放的话，那么我们的程序就有被系统杀掉的风险了。</li>
<li>TRIM_MEMORY_COMPLETE 表示手机目前内存已经很低了，并且我们的程序处于LRU缓存列表的最边缘位置，系统会最优先考虑杀掉我们的应用程序，在这个时候应当尽可能地把一切可以释放的东西都进行释放。</li>
</ul>
</li>
</ol>
<p>so:</p>
<p>adb shell am send-trim-memory com.fifthai.dacall RUNNING_CRITICAL</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/29/Android%E5%89%8D%E5%8F%B0Activity%E9%87%8D%E5%90%AF%E9%97%AE%E9%A2%98%E3%80%82/" data-id="ckcli33sg0007186ndjtg0b7y" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-字体文件的的坑。" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/04/%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6%E7%9A%84%E7%9A%84%E5%9D%91%E3%80%82/" class="article-date">
  <time datetime="2020-06-04T13:05:23.000Z" itemprop="datePublished">2020-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/04/%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6%E7%9A%84%E7%9A%84%E5%9D%91%E3%80%82/">字体文件的的坑。</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近Flutter使用ttf字体，在iOS，字体绘制位置出现了不正常的位置，命名存在绘制空间，但是文字绘制的位置就是偏移出了widget内部；</p>
<blockquote>
<p>各种debug，最后，发现字体文件本身有问题，字体文件缺少自身高度信息，所有字符高度可能是0，只发生在iOS下。</p>
</blockquote>
<h1 id="这里，就研究一番字体文件。"><a href="#这里，就研究一番字体文件。" class="headerlink" title="这里，就研究一番字体文件。"></a>这里，就研究一番字体文件。</h1><p>TrueType (Free Library )字体通常包含在单个TrueType字体文件中，其文件后缀为.TTF。<br>OpenType 字体是以类似于TrueType字体的格式编码的POSTSCRIPT字体。OPENTYPE字体使用.OTF文件后缀。OPENTYPE还允许把多个 OPENTYPE字体组合在一个文件中以利于数据共享。这些字体被称为TrueType字体集（TrueType collection），其文件后缀为.TTC。</p>
<p>TrueType字体用machintosh的轮廓字体资源的格式编码，有一个唯一的标记名”sfnt”。windows没有macintosh的位图字体资源格式，字体目录包含了字体格式的版本号和几个表，每个表都有一个table entry结构项，table entry结构包含了资源标记、校验和、偏移量和每个表的大小。</p>
<p>TrueType 字体中的所有数据都使用big-endian编码，最高位字节在最前面（因为TrueType字体最初是由apple公司定义的，而apple公司的os 运行在motorola的cpu上）。<br>如果一个TrueType字体以00 01 00 00 ,00 17开头，我们就可以知道它的格式是轮廓字体资源（”sfnt”）版本1.0的格式，有23个表。</p>
<p>TableDirectory结构的最后一个字段是可变长度的tableentry结构的数组，安体中的每个表对应其中一项。<br>TrueType字体中的每个表都保存了不同的逻辑信息—–如图元中数据、字符到图元的映射、字距调整信息等等。有表是必须的，有些是可选的。下表列出了TrueType字体中常见的表。</p>
<ul>
<li>head 字体头 字体的全局信息</li>
<li>cmap 字符代码到图元的映射 把字符代码映射为图元索引</li>
<li>glyf 图元数据 图元轮廓定义以及网格调整指令</li>
<li>maxp 最大需求表 字体中所需内存分配情况的汇总数据</li>
<li>mmtx 水平规格 图元水平规格</li>
<li>loca 位置表索引 把元索引转换为图元的位置</li>
<li>name 命名表 版权说明、字体名、字体族名、风格名等等</li>
<li>hmtx 水平布局 字体水平布局星系：上高、下高、行间距、最大前进宽度、最小左支撑、最小右支撑</li>
<li>kerm 字距调整表 字距调整对的数组</li>
<li>post PostScript信息 所有图元的PostScript FontInfo目录项和PostScript名</li>
<li>PCLT PCL 5数据 HP PCL 5Printer Language 的字体信息：字体数、宽度、x高度、风格、记号集等等</li>
<li>OS/2 OS/2和Windows特有的规格 TrueType字体所需的规格集</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/04/%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6%E7%9A%84%E7%9A%84%E5%9D%91%E3%80%82/" data-id="ckcli33te002n186n3n375sdn" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Flutter-iOS-三方登陆-苹果" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/21/Flutter-iOS-%E4%B8%89%E6%96%B9%E7%99%BB%E9%99%86-%E8%8B%B9%E6%9E%9C/" class="article-date">
  <time datetime="2020-05-21T08:04:01.000Z" itemprop="datePublished">2020-05-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Flutter/">Flutter</a>►<a class="article-category-link" href="/categories/Flutter/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/21/Flutter-iOS-%E4%B8%89%E6%96%B9%E7%99%BB%E9%99%86-%E8%8B%B9%E6%9E%9C/">Flutter / iOS / 三方登陆 苹果</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="苹果登陆-Sign-in-with-Apple"><a href="#苹果登陆-Sign-in-with-Apple" class="headerlink" title="苹果登陆 Sign in with Apple"></a>苹果登陆 Sign in with Apple</h1><p>按照使用途径可分为，</p>
<ul>
<li>iOS手机登陆<ul>
<li>手机iOS客户端登陆开发者后台配置流程下面提到</li>
<li><a href="https://www.jianshu.com/p/483b998f2370" target="_blank" rel="noopener">https://www.jianshu.com/p/483b998f2370</a></li>
</ul>
</li>
<li>web登陆<ul>
<li>通过网站restful登陆，Android，pc端等使用，开发者后台需要额外配置</li>
</ul>
</li>
<li><a href="https://www.jianshu.com/p/e1284bd8c72a" target="_blank" rel="noopener">介绍 iOS / web的</a><br>后端链接苹果服务器，又分为两种方式</li>
<li>根据iOS客户端返回的 <code>identityToken</code> <code>user</code> 传给后端，后端去验证</li>
<li>根据开发者后台配置，生成的私钥文件key（一次性生成）与苹果后端验证</li>
<li><a href="https://www.jianshu.com/p/655972b0e7da" target="_blank" rel="noopener">介绍后端接入的</a>
        
          <p class="article-more-link">
            <a href="/2020/05/21/Flutter-iOS-%E4%B8%89%E6%96%B9%E7%99%BB%E9%99%86-%E8%8B%B9%E6%9E%9C/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/21/Flutter-iOS-%E4%B8%89%E6%96%B9%E7%99%BB%E9%99%86-%E8%8B%B9%E6%9E%9C/" data-id="ckcli33sq000r186nhnaqam9b" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dart/" rel="tag">dart</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/" rel="tag">swift</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Android编译之Gradle" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/15/Android%E7%BC%96%E8%AF%91%E4%B9%8BGradle/" class="article-date">
  <time datetime="2020-05-15T02:36:15.000Z" itemprop="datePublished">2020-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/15/Android%E7%BC%96%E8%AF%91%E4%B9%8BGradle/">Android编译之Gradle</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>因为修改了几个配置，导致flutter项目打包开始不正常，折腾了1天多没有搞定，我决定重新入门一下android的编译。</p>
<h1 id="1-gradlew-v"><a href="#1-gradlew-v" class="headerlink" title="1. ./gradlew -v"></a>1. ./gradlew -v</h1><p>首先，我查了一片gradle入门文档。一开始，我是在home路径下直接测试gradle -v。</p>
<p>但是我又没装它，我就想到了项目下的这个脚本，根据打印信息，我知道了，gradle其实是这个脚本管理的。正好跟项目下的gradle/warpper路径下的文件版本号对应。应该是AS管理了它。</p>
<p>对于一个安卓项目，一般项目路径下会有as生成的两个gradlew脚本，对应shell跟win下的bat，我们的程序大都是从这里启动的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">fd@fifthdiiondeMBP android % ./gradlew -v</span><br><span class="line"></span><br><span class="line">Welcome to Gradle 5.6.4!</span><br><span class="line"></span><br><span class="line">Here are the highlights of this release:</span><br><span class="line"> - Incremental Groovy compilation</span><br><span class="line"> - Groovy compile avoidance</span><br><span class="line"> - Test fixtures <span class="keyword">for</span> Java projects</span><br><span class="line"> - Manage plugin versions via settings script</span><br><span class="line"></span><br><span class="line">For more details see https://docs.gradle.org/5.6.4/release-notes.html</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">------------------------------------------------------------</span><br><span class="line">Gradle 5.6.4</span><br><span class="line">------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Build time:   2019-11-01 20:42:00 UTC</span><br><span class="line">Revision:     dd870424f9bd8e195d614dc14bb140f43c22da98</span><br><span class="line"></span><br><span class="line">Kotlin:       1.3.41</span><br><span class="line">Groovy:       2.5.4</span><br><span class="line">Ant:          Apache Ant(TM) version 1.9.14 compiled on March 12 2019</span><br><span class="line">JVM:          13 (Oracle Corporation 13+33)</span><br><span class="line">OS:           Mac OS X 10.15.4 x86_64</span><br></pre></td></tr></table></figure>
<h1 id="2-helloworld"><a href="#2-helloworld" class="headerlink" title="2. helloworld"></a>2. helloworld</h1><p>继续。 build.gradle是Gradle默认的构建脚本文件，执行Gradle命令的时候，会默认加载当前目录下的build.gradle脚本文件。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 给安卓项目，的build.gradle加一段儿</span></span><br><span class="line">task helloworld &#123;</span><br><span class="line">    doLast &#123;</span><br><span class="line">        println <span class="string">'Hello World!'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个构建脚本定义一个任务（Task），任务名字叫helloworld，并且给任务helloworld添加了一个动作，官方名字是Action，阅读Gradle源代码你会到处见到它，其实他就是一段Groovy语言实现的闭包，doLast就意味着在Task执行完毕之后要回调doLast的这部分闭包的代码实现。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./gradlew helloworld</span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">&gt; Task :helloworld</span><br><span class="line">Hello World!</span><br></pre></td></tr></table></figure>
<h1 id="3-打包"><a href="#3-打包" class="headerlink" title="3. 打包"></a>3. 打包</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">自动打release包</span><br><span class="line">./gradlew assembleRelease &amp;&amp; cp ./app/build/outputs/apk/app-release.apk ~/Desktop</span><br><span class="line"></span><br><span class="line">自动打Debug包</span><br><span class="line">./gradlew assembleDebug &amp;&amp; cp ./app/build/outputs/apk/app-release.apk ~/Desktop</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/15/Android%E7%BC%96%E8%AF%91%E4%B9%8BGradle/" data-id="ckcli33sd0003186nddxk1gf5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/%E5%85%B6%E4%BB%96%E6%8A%80%E8%83%BD/">其他技能</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/">Flutter</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/iOS/">iOS</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E4%BB%96%E6%8A%80%E8%83%BD/">其他技能</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E4%BB%96%E6%8A%80%E8%83%BD/Flutter/">Flutter</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8E%9F%E7%90%86%E4%B8%8E%E5%9F%BA%E7%A1%80/">原理与基础</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/" rel="tag">c++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dart/" rel="tag">dart</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/" rel="tag">go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kotlin/" rel="tag">kotlin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/net/" rel="tag">net</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift/" rel="tag">swift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/c/" style="font-size: 17.5px;">c++</a> <a href="/tags/dart/" style="font-size: 20px;">dart</a> <a href="/tags/go/" style="font-size: 10px;">go</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/kotlin/" style="font-size: 12.5px;">kotlin</a> <a href="/tags/net/" style="font-size: 10px;">net</a> <a href="/tags/swift/" style="font-size: 12.5px;">swift</a> <a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 15px;">软件</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/07/14/Github%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/">使用Github搭建博客</a>
          </li>
        
          <li>
            <a href="/2020/07/11/Dart-%E7%BC%96%E8%AF%91%E3%80%81%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E3%80%81%E5%92%8C%E6%B5%8B%E8%AF%95-web-%E5%BA%94%E7%94%A8%E7%9A%84-build-runner/">Dart 编译、启动服务、和测试 web 应用的 build_runner</a>
          </li>
        
          <li>
            <a href="/2020/07/07/LaTex-%E9%80%9F%E6%88%90%E6%89%8B%E5%86%8C/">LaTex 速成手册。</a>
          </li>
        
          <li>
            <a href="/2020/07/01/Dart-%E6%B3%A8%E8%A7%A3%EF%BC%8CAPT/">Dart 注解，APT</a>
          </li>
        
          <li>
            <a href="/2020/06/30/Flutter-%E5%8A%A8%E7%94%BB%E8%80%83%E7%A9%B6/">Flutter 动画考究</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Kevin 刘洋<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>